/**
 * 
 * @Cristalle Choi and @Sara Mehdinia 
 * CMS 270 Assignment 2 - Inheritance and Polymorphism
 * Batch Processing System for a Credit Union
 * November 11, 2020
 */

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner; 

//Driver class
public class BatchProcessor {
	
	//Stores all of the accounts in a single ArrayList
	private static ArrayList<Account> accounts = new ArrayList<Account>(); 

	//Deposit method: amount to be deposited 
	public static void processDeposit(Account a, double Amt) {
		
	}
	
	//*************************************
	//Withdrawal method: amount to be withdrawn
	public static void processWithdrawal(Account a, double Amt, String owner) {
		
	}
	
	//*************************************
	//Transfer method: transfer from account to another account
	public static void processTransfer(Account a, Account b, double Amt, String owner) {
		
	}
	
	//***************************************
	//Close method: close account
	public static void processClose(Account a, String owner) {
		
	}
	
	//****************************************
	//Main method
	public static void main(String[] args) {
		//Read the original account-status data from accounts.txt and stores all of accounts in a single ArrayList
		
		
		//Read batch.txt and process the transactions one at a time
		
		//W: amount to be withdrawn
		
		//D: amount to be deposited
		
		//T: transfer from account number to another account number
		
		//C: account number to be closed
		
		//Write the updated account status data to the text file accounts.txt that overwrite the original file
		
		try {
			//reads original account-status data from accounts.txt 
			File f = new File("accounts.txt"); 
			Scanner input = new Scanner(f); 
			String l = input.nextLine(); 
			
			//counts how many accounts to process 
			int numAccounts = 0; 
			while(input.hasNextLine()) {
				System.out.println(input.nextLine()); 
				numAccounts++; 
				System.out.println(numAccounts); 
			}
			//Stores all of the accounts in a single ArrayList called accounts
			for(int i = 0; i < numAccounts; i++) {
				String line = input.nextLine(); 
				String[] a = line.split(" ");   //splits on the blank space 
				String accountNum = a[0];  //account number
				char accountType = a[1].charAt(0);   //account type: C for checking, S for savings
				String ownerName = a[2] + a[3];       //owner name given as first name and last name
				double acctBalance = Double.parseDouble(a[4]);   //account balance
				
				//add to accounts arraylist
				if(accountType == 'C') {  //make a new checkings account
					accounts.add(i, new Checkings(accountNum, ownerName, acctBalance)); 
				}
				else if(accountType == 'S'){   //make a new savings account objects
					accounts.add(i, new Savings(accountNum, ownerName, acctBalance)); 
				}
			}
			
			
			
			input.close(); //Close the Scanner
			
		}  //if it fails, then the catch block will handle errors
		catch(FileNotFoundException e) {
			System.out.println("Error"); 
			e.printStackTrace(); //will tell you what went wrong
		}
		
		

	}
}
